"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[202],{9202:function(n,e,r){r.r(e),r.d(e,{default:function(){return Nn}});var t,o,i,a,s,c,d,l,u=r(885),p=r(2791),f=r(3309),h=r(9298),v=r(5985),m=function(n,e,r,t){switch(t){case"successOnly":return v.Am.success(r.onSuccess);case"errorOnly":return v.Am.error(r.onError);default:return n?v.Am.success(r.onSuccess):e?v.Am.error(r.onError):void 0}},g=function(n,e){try{var r=JSON.stringify(e);localStorage.setItem(n,r)}catch(t){console.error("Set state error: ",t.message)}},x=function(n){try{var e=localStorage.getItem(n);return null===e?void 0:JSON.parse(e)}catch(r){console.error("Get state error: ",r.message)}},Z=r(5048),b=r(1129),w=r(4684),k=r(8384),y=r(184),j="contact-name",E="contact-number",C=function(){var n;return null!==(n=x(j))&&void 0!==n?n:""},S=function(){var n;return null!==(n=x(E))&&void 0!==n?n:""},P=function(n){var e=n.formTitle,r=(0,p.useState)(C),t=(0,u.Z)(r,2),o=t[0],i=t[1],a=(0,p.useState)(S),s=(0,u.Z)(a,2),c=s[0],d=s[1],l=(0,p.useState)(!1),v=(0,u.Z)(l,2),x=v[0],P=v[1],D=(0,p.useState)(!1),A=(0,u.Z)(D,2),I=A[0],M=A[1],R=(0,w.O9)(),z=R.isEditMode,L=R.toEdit,O=(0,p.useRef)(!0),T=(0,h.Lr)(),B=(0,u.Z)(T,2),N=B[0],_=B[1],F=(0,h.wv)(),$=(0,u.Z)(F,2),H=$[0],V=$[1],Y=(0,Z.v9)(b.l.getHasContact(o,{skip:z})),q={name:function(n){return i(n)},number:function(n){return d(n)}},J=I?"Saved":"Save",U=I?(0,y.jsx)(k.Z,{}):null,G=_.isSuccess&&!_.isUninitialized||V.isSuccess&&!V.isUninitialized,W=_.isError||V.isError;(0,p.useEffect)((function(){z&&O.current&&(i(null===L||void 0===L?void 0:L.name),d(null===L||void 0===L?void 0:L.number),O.current=!1),g(j,o),g(E,c)}),[o,c,z,null===L||void 0===L?void 0:L.name,null===L||void 0===L?void 0:L.number]),(0,p.useEffect)((function(){return G&&(M(!0),P(!0)),function(){(G||z)&&(window.localStorage.removeItem(j),window.localStorage.removeItem(E))}}),[G,z]);var X=function(n){var e=n.target,r=e.name,t=e.value;q[r](t)};return(0,y.jsxs)(y.Fragment,{children:[e?(0,y.jsx)(f.vw,{children:e}):null,(0,y.jsx)(f.l0,{onSubmit:function(n){n.preventDefault(),z||!Y?function(){var n={name:o,number:c};z?H({id:L.id,contact:n}):N(n),m(G,W,{onSuccess:"Contact ".concat(o," was added to the phonebook"),onError:"Something went wrong! Please, try again"})}():m(null,null,{onError:"".concat(o," has been already added")},"errorOnly")},children:(0,y.jsxs)(f.im,{children:[(0,y.jsx)(f.II,{id:"name",type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,value:o,onChange:X,variant:"outlined",label:"Name",disabled:x}),(0,y.jsx)(f.II,{id:"number",type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,value:c,onChange:X,variant:"outlined",label:"Number",disabled:x}),(0,y.jsxs)(f.R$,{type:"submit",disabled:x,children:[U,J]}),(0,y.jsx)(f.Cd,{type:"button",variant:"outlined",onClick:function(){i(""),d(""),M(!1),!z&&P(!1)},children:"Clear"})]})})]})},D=function(n){return n.filter.value},A=r(6390),I=function(){var n=(0,Z.I0)(),e=(0,Z.v9)(D);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(f.II,{id:"filter",type:"text",name:"filter",onChange:function(e){return n(A.w.setFilter(e.target.value))},value:e,label:"Search contacts by name"})})},M=r(168),R=r(7691),z=R.ZP.ul(t||(t=(0,M.Z)(["\n    width: 300px;\n    margin-top: ",";\n    border-radius: 10px;\n    background-color: #4682b4;\n    color: #ffffff;\n"])),(function(n){return n.theme.spacing(3)})),L=R.ZP.li(o||(o=(0,M.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: ",";\n\n    &:not(:last-child) {\n        border-bottom: 1px solid #ffffff;\n    }\n"])),(function(n){return n.theme.spacing(3,2)})),O=r(1413),T=r(5987),B=R.ZP.button(i||(i=(0,M.Z)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    font: inherit;\n    font-size: 8px;\n    border: none;\n    border-radius: 10px;\n    background-color: #ff0000;\n    color: #ffffff;\n\n    cursor: pointer;\n\n    &:active {\n        box-shadow: inset 0px 0px 4px 0px #fafafa;\n    }\n    &:hover {\n            background-color: rgba(0, 0, 0, 0.34);\n    }\n"]))),N=["children","onClick"],_=function(n){var e=n.children,r=n.onClick,t=(0,T.Z)(n,N);return(0,y.jsx)(B,(0,O.Z)((0,O.Z)({onClick:r},t),{},{children:e}))},F=r(9e3),$=r(3400),H=R.ZP.article(a||(a=(0,M.Z)(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n"]))),V=R.ZP.p(s||(s=(0,M.Z)([""]))),Y=R.ZP.p(c||(c=(0,M.Z)([""]))),q=(0,R.ZP)($.Z)(d||(d=(0,M.Z)(["\n    && {\n        width: 20px;\n        height: 20px;\n        margin-left: auto;\n        margin-right: 4px;\n        background-color: #ff0000;\n        color: #ffffff;\n\n        &:hover {\n            background-color: rgba(0, 0, 0, 0.34);\n        }\n\n        & svg {\n            width: 14px;\n            height: 14px;\n        }\n    }\n"]))),J={onSuccess:"Contact was successfuly removed",onError:"Ups... looks like an erorr. Please, try again"},U=function(n){var e=n.id,r=n.name,t=n.number,o=(0,h.Nt)(),i=(0,u.Z)(o,4),a=i[0],s=i[1],c=i[2],d=i[3],l=(0,w.O9)().setIsEditMode,p=(0,w.M$)().setOpenDrawer;return(0,y.jsxs)(H,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(V,{children:r}),(0,y.jsx)(Y,{children:t})]}),(0,y.jsx)(q,{onClick:function(){return l({id:e,name:r,number:t}),void p(!0)},children:(0,y.jsx)(F.Z,{})}),(0,y.jsx)(_,{onClick:function(){return a(e),void m(s,c,J)},disabled:d,children:"\u2573"})]})},G=R.ZP.p(l||(l=(0,M.Z)(["\n    margin-top: ",";\n    padding: ",";\n    font-weight: 700;\n"])),(function(n){return n.theme.spacing(3)}),(function(n){return n.theme.spacing(5,0)})),W=function(n){var e=n.message;return(0,y.jsx)(G,{children:e})},X=r(7162),K=r(6871),Q=r(8724),nn=function(){var n=(0,h.bC)(),e=n.data,r=n.error,t=n.isLoading,o=(0,Z.v9)(D),i=(0,K.s0)();(0,p.useEffect)((function(){401===(null===r||void 0===r?void 0:r.status)&&i("/"+Q.Z6.LOGIN)}),[r,i]);var a=(null===e||void 0===e?void 0:e.length)&&!r,s=!a&&!t,c=a?e.filter((function(n){return n.name.toLowerCase().includes(o.toLowerCase())})):[],d=c.length?c:e;return(0,y.jsxs)(y.Fragment,{children:[t&&(0,y.jsx)(X.Z,{type:"dual-rings"}),a?(0,y.jsx)(z,{children:d.map((function(n){var e=n.id,r=n.name,t=n.number;return(0,y.jsx)(L,{children:(0,y.jsx)(U,{id:e,name:r,number:t})},e)}))}):null,s?(0,y.jsx)(W,{message:"Your phonebook is empty..."}):null]})},en=r(3366),rn=r(7462),tn=r(8182),on=r(4419),an=r(3971),sn=r(6752),cn=r(3199),dn=r(2071),ln=r(3967),un=r(4999),pn=r(7602),fn=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function hn(n,e,r){var t,o=function(n,e,r){var t,o=e.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),a=(0,pn.Z)(e);if(e.fakeTransform)t=e.fakeTransform;else{var s=a.getComputedStyle(e);t=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var c=0,d=0;if(t&&"none"!==t&&"string"===typeof t){var l=t.split("(")[1].split(")")[0].split(",");c=parseInt(l[4],10),d=parseInt(l[5],10)}return"left"===n?"translateX(".concat(i?i.right+c-o.left:a.innerWidth+c-o.left,"px)"):"right"===n?"translateX(-".concat(i?o.right-i.left-c:o.left+o.width-c,"px)"):"up"===n?"translateY(".concat(i?i.bottom+d-o.top:a.innerHeight+d-o.top,"px)"):"translateY(-".concat(i?o.top-i.top+o.height-d:o.top+o.height-d,"px)")}(n,e,"function"===typeof(t=r)?t():t);o&&(e.style.webkitTransform=o,e.style.transform=o)}var vn=p.forwardRef((function(n,e){var r=(0,ln.Z)(),t={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},i=n.addEndListener,a=n.appear,s=void 0===a||a,c=n.children,d=n.container,l=n.direction,u=void 0===l?"down":l,f=n.easing,h=void 0===f?t:f,v=n.in,m=n.onEnter,g=n.onEntered,x=n.onEntering,Z=n.onExit,b=n.onExited,w=n.onExiting,k=n.style,j=n.timeout,E=void 0===j?o:j,C=n.TransitionComponent,S=void 0===C?sn.ZP:C,P=(0,en.Z)(n,fn),D=p.useRef(null),A=(0,dn.Z)(c.ref,D),I=(0,dn.Z)(A,e),M=function(n){return function(e){n&&(void 0===e?n(D.current):n(D.current,e))}},R=M((function(n,e){hn(u,n,d),(0,un.n)(n),m&&m(n,e)})),z=M((function(n,e){var t=(0,un.C)({timeout:E,style:k,easing:h},{mode:"enter"});n.style.webkitTransition=r.transitions.create("-webkit-transform",(0,rn.Z)({},t)),n.style.transition=r.transitions.create("transform",(0,rn.Z)({},t)),n.style.webkitTransform="none",n.style.transform="none",x&&x(n,e)})),L=M(g),O=M(w),T=M((function(n){var e=(0,un.C)({timeout:E,style:k,easing:h},{mode:"exit"});n.style.webkitTransition=r.transitions.create("-webkit-transform",e),n.style.transition=r.transitions.create("transform",e),hn(u,n,d),Z&&Z(n)})),B=M((function(n){n.style.webkitTransition="",n.style.transition="",b&&b(n)})),N=p.useCallback((function(){D.current&&hn(u,D.current,d)}),[u,d]);return p.useEffect((function(){if(!v&&"down"!==u&&"right"!==u){var n=(0,cn.Z)((function(){D.current&&hn(u,D.current,d)})),e=(0,pn.Z)(D.current);return e.addEventListener("resize",n),function(){n.clear(),e.removeEventListener("resize",n)}}}),[u,v,d]),p.useEffect((function(){v||N()}),[v,N]),(0,y.jsx)(S,(0,rn.Z)({nodeRef:D,onEnter:R,onEntered:L,onEntering:z,onExit:T,onExited:B,onExiting:O,addEndListener:function(n){i&&i(D.current,n)},appear:s,in:v,timeout:E},P,{children:function(n,e){return p.cloneElement(c,(0,rn.Z)({ref:I,style:(0,rn.Z)({visibility:"exited"!==n||v?void 0:"hidden"},k,c.props.style)},e))}}))})),mn=r(703),gn=r(4036),xn=r(1046),Zn=r(7630),bn=r(1217);function wn(n){return(0,bn.Z)("MuiDrawer",n)}(0,r(5878).Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var kn=["BackdropProps"],yn=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],jn=function(n,e){var r=n.ownerState;return[e.root,("permanent"===r.variant||"persistent"===r.variant)&&e.docked,e.modal]},En=(0,Zn.ZP)(an.Z,{name:"MuiDrawer",slot:"Root",overridesResolver:jn})((function(n){var e=n.theme;return{zIndex:(e.vars||e).zIndex.drawer}})),Cn=(0,Zn.ZP)("div",{shouldForwardProp:Zn.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:jn})({flex:"0 0 auto"}),Sn=(0,Zn.ZP)(mn.Z,{name:"MuiDrawer",slot:"Paper",overridesResolver:function(n,e){var r=n.ownerState;return[e.paper,e["paperAnchor".concat((0,gn.Z)(r.anchor))],"temporary"!==r.variant&&e["paperAnchorDocked".concat((0,gn.Z)(r.anchor))]]}})((function(n){var e=n.theme,r=n.ownerState;return(0,rn.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===r.anchor&&{left:0},"top"===r.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===r.anchor&&{right:0},"bottom"===r.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===r.anchor&&"temporary"!==r.variant&&{borderRight:"1px solid ".concat((e.vars||e).palette.divider)},"top"===r.anchor&&"temporary"!==r.variant&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider)},"right"===r.anchor&&"temporary"!==r.variant&&{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"bottom"===r.anchor&&"temporary"!==r.variant&&{borderTop:"1px solid ".concat((e.vars||e).palette.divider)})})),Pn={left:"right",right:"left",top:"down",bottom:"up"};var Dn,An,In,Mn=p.forwardRef((function(n,e){var r=(0,xn.Z)({props:n,name:"MuiDrawer"}),t=(0,ln.Z)(),o={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},i=r.anchor,a=void 0===i?"left":i,s=r.BackdropProps,c=r.children,d=r.className,l=r.elevation,u=void 0===l?16:l,f=r.hideBackdrop,h=void 0!==f&&f,v=r.ModalProps,m=(v=void 0===v?{}:v).BackdropProps,g=r.onClose,x=r.open,Z=void 0!==x&&x,b=r.PaperProps,w=void 0===b?{}:b,k=r.SlideProps,j=r.TransitionComponent,E=void 0===j?vn:j,C=r.transitionDuration,S=void 0===C?o:C,P=r.variant,D=void 0===P?"temporary":P,A=(0,en.Z)(r.ModalProps,kn),I=(0,en.Z)(r,yn),M=p.useRef(!1);p.useEffect((function(){M.current=!0}),[]);var R=function(n,e){return"rtl"===n.direction&&function(n){return-1!==["left","right"].indexOf(n)}(e)?Pn[e]:e}(t,a),z=a,L=(0,rn.Z)({},r,{anchor:z,elevation:u,open:Z,variant:D},I),O=function(n){var e=n.classes,r=n.anchor,t=n.variant,o={root:["root"],docked:[("permanent"===t||"persistent"===t)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,gn.Z)(r)),"temporary"!==t&&"paperAnchorDocked".concat((0,gn.Z)(r))]};return(0,on.Z)(o,wn,e)}(L),T=(0,y.jsx)(Sn,(0,rn.Z)({elevation:"temporary"===D?u:0,square:!0},w,{className:(0,tn.Z)(O.paper,w.className),ownerState:L,children:c}));if("permanent"===D)return(0,y.jsx)(Cn,(0,rn.Z)({className:(0,tn.Z)(O.root,O.docked,d),ownerState:L,ref:e},I,{children:T}));var B=(0,y.jsx)(E,(0,rn.Z)({in:Z,direction:Pn[R],timeout:S,appear:M.current},k,{children:T}));return"persistent"===D?(0,y.jsx)(Cn,(0,rn.Z)({className:(0,tn.Z)(O.root,O.docked,d),ownerState:L,ref:e},I,{children:B})):(0,y.jsx)(En,(0,rn.Z)({BackdropProps:(0,rn.Z)({},s,m,{transitionDuration:S}),className:(0,tn.Z)(O.root,O.modal,d),open:Z,ownerState:L,onClose:g,hideBackdrop:h,ref:e},I,A,{children:B}))})),Rn=["anchor","children"],zn=function(n){var e=n.anchor,r=n.children,t=(0,T.Z)(n,Rn),o=(0,w.M$)(),i=o.openDrawer,a=o.setOpenDrawer,s=(0,p.useRef)(null);return(0,y.jsx)(Mn,(0,O.Z)((0,O.Z)({ref:s,anchor:e,open:i,hideBackdrop:!0,onClose:function(n){"Escape"===n.code&&a(!1)},onClick:function(n){n.target===s.current&&a(!1)}},t),{},{children:r}))},Ln=r(6151),On=R.ZP.div(Dn||(Dn=(0,M.Z)(["\n    display: flex;\n    align-items: flex-start;\n    max-width: 600px;\n    margin: 0 auto;\n    padding: 20px 0 0 0;\n"]))),Tn=R.ZP.div(An||(An=(0,M.Z)(["\n    flex-grow: 80;\n"]))),Bn=(0,R.ZP)(Ln.Z)(In||(In=(0,M.Z)(["\n    && {\n        background-color: limegreen;\n        margin-left: 4px;\n\n        &:hover {\n            background-color: green;\n        }\n    }\n"]))),Nn=function(){var n=(0,w.M$)(),e=n.openDrawer,r=n.setOpenDrawer,t=(0,w.O9)(),o=t.isEditMode,i=t.setIsEditMode,a=o?"Edit contact":"Create new contact";return(0,y.jsxs)(On,{children:[(0,y.jsxs)(Tn,{children:[(0,y.jsx)(I,{}),(0,y.jsx)(nn,{})]}),(0,y.jsx)(Bn,{onClick:function(){i(null),r(!e)},variant:"contained",children:"Add contact"}),(0,y.jsx)(zn,{anchor:"right",children:(0,y.jsx)(P,{formTitle:a})})]})}},8384:function(n,e,r){var t=r(4836);e.Z=void 0;var o=t(r(5649)),i=r(184),a=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");e.Z=a},9e3:function(n,e,r){var t=r(4836);e.Z=void 0;var o=t(r(5649)),i=r(184),a=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");e.Z=a}}]);
//# sourceMappingURL=202.c9144484.chunk.js.map